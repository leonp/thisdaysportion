<!DOCTYPE html>

<html lang="{{ site.lang }}">

    <head>

        {% if page.is_home %}
        <title>{{ site.title }}</title>
        <meta name="description" content="{{ site.description }}">
        {% elsif page.title.rendered %}
        <title>{{ page.title.rendered | strip_html | truncatewords: 5 }}&hellip; â€“ {{ site.title }}</title>
        {% else %}
        <title>{{ page.title }} â€“ {{ site.title }}</title>
        {% endif %}

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <meta name="author" content="Leon Paternoster">
        {% if jekyll.environment == "development" %}
        <meta name="robots" content="noindex, nofollow">
        {% endif %}

        {% if page.is_post or page.is_note or page.is_link %}
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@leonpaternoster">
        <meta name="twitter:title" content="{{ page.title }}">
        {% if page.description %}
        <meta name="twitter:description" content="{{ page.description }}" />
        {% elsif page.sub %}
        <meta name="twitter:description" content="{{ page.sub  | strip_html }}">
        {% else %}
        <meta name="twitter:description" content="{{ page.excerpt  | strip_html }}">
        {% endif %}
        {% if page.img %}
        <meta name="twitter:image" content="https://www.thisdaysportion.com/images/{{ page.img }}" />
        <meta name="twitter:image:alt" content="{{ page.alt }}" />
        {% endif %}
        {% endif %}

        {% if page.is_post or page.is_note or page.is_link %}
        <link rel="schema.DCTERMS" href="https://purl.org/dc/terms/">
        <meta name="DC.Title" content="{{ page.title}}">
        <meta name="DC.Creator" content="Leon Paternoster">
        <meta name="DC.Subject" content="{% if page.subject %}{{ page.subject }}{% else %}{{ page.category | capitalize }}{% endif %}">
        {% if page.description %}<meta name="DC.Description" content="{{ page.description | strip_html }}">{% elsif page.sub %}<meta name="DC.Description" content="{{ page.sub | strip_html  }}">{% else %}<meta name="DC.Description" content="{{ page.excerpt | strip_html  }}">{% endif %}
        <meta name="DC.Publisher" content="Leon Paternoster">
        <meta name="DC.Contributor" content="Leon Paternoster">
        <meta name="DC.Date" content="{{ page.date | date: "%b %-d %Y" }}">
        <meta name="DC.Language" content="en-gb">
        {% endif %}

        {% if site.webmention-pingback %}<link rel="pingback" href="{{ site.webmention-pingback }}">{% endif %}
        {% if site.webmention-mention %}<link rel="webmention" href="{{ site.webmention-mention }}">{% endif %}
        {% if site.me %}<link href="{{ site.me }}" rel="me">{% endif %}

        <link rel="alternate" type="application/rss+xml" title="{{ site.title }} â€“ all posts" href="{{ site.url }}/feed/index.xml">

        {% if page.category == 'libraries' or page.title == 'Libraries' %}
        <link rel="alternate" type="application/rss+xml" title="{{ site.title }} â€“ posts about libraries" href="/posts/libraries/feed/index.xml">
        {% endif %}

        {% if page.category == 'politics' or page.title == 'Politics' %}
        <link rel="alternate" type="application/rss+xml" title="{{ site.title }} â€“ posts about politics" href="/posts/politics/feed/index.xml">
        {% endif %}

        {% if page.category == 'thinking' or page.title == 'Thinking' %}
        <link rel="alternate" type="application/rss+xml" title="{{ site.title }} â€“ thinking posts" href="/posts/thinking/feed/index.xml">
        {% endif %}

        {% if page.category == 'web' or page.title == 'Web' %}
        <link rel="alternate" type="application/rss+xml" title="{{ site.title }} â€“ posts about the web" href="/posts/web/feed/index.xml">
        {% endif %}

        {% if page.is_note == 'true' or page.title == 'Notes' %}
        <link rel="alternate" type="application/rss+xml" title="{{ site.title }} â€“ notes" href="/notes/feed/index.xml">
        {% endif %}

        {% if page.is_link == 'true' or page.title == 'Links' %}
        <link rel="alternate" type="application/rss+xml" title="{{ site.title }} â€“ links" href="/links/feed/index.xml">
        {% endif %}

        {% if site.css == 'inline' %}
        <style>
        {% capture inline-styles %}
        {% include style.scss %}
        {% endcapture %}
        {{ inline-styles | scssify }}
        </style>
        {% else %}
        <link href="/css/style.css" rel="stylesheet">
        {% endif %}

        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,700;0,900;1,400&display=swap" rel="stylesheet">

        <script src="/js/alpine.min.js" defer></script>

        <!-- ~ Hullo. I would make this a Liquid include if I wanted to preload some fonts ðŸ¦‰ -->

    </head>

    <body class="ma0 pa0 c-background c-foreground c-serif {% if page.is_home %}ðŸ¦‰{% else %}{{ page.slug }}{% endif %}">

        <a class="f6 c-target c-no-print pv2 c-ph clip dib" href="#content">Skip to content</a>

        <header class="f6 bg-light-gray bb b--moon-gray c-sans-serif c-no-print c-ph">

            <div class="flex-l justify-between-l items-center">

                <div class="w-60-l flex-l">

                    <div class="mr3-l bb b--moon-gray bn-l"><a href="/" rel="index" class="dib pv2 b">This dayâ€™s portion</a></div>

                    <nav class="mr3-l flex items-center">

                        {% assign pages = site.pages | where: "in_nav", true | sort: "order" %}

                        {% for this_page in pages %}

                            <a href="{{ this_page.url }}" class="dib pv2 mr2 mr3-ns{% if this_page.url == page.url %} c-accent{% endif %}">{{ this_page.title }}</a>

                        {% endfor %}

                        <a class="dib pv2" href="/feed/index.xml">RSS</a>

                    </nav>

                </div>

                <form class="w-40-l pb3 pb0-l tr-l relative">

                    <label for="search-input" class="clip db f7 mb1">Type some words for instant search results:</label>

                    <input type="text" autocapitalize="off" name="search-input" id="search-input" class="c-bg c-bg-search w-100 c-sans-serif pl4 pr1 pv1 ba b--light-silver c-remove-ios-borders">

                    <div class="mb2 tl absolute w-100 left-0 top-1 c-sans-serif c-max-vh-50 overflow-x-hidden overflow-y-scroll" id="results-container">

                    </div>

                </form>

            </div>

        </header>

        <main id="content" class="pb3 c-ph">
